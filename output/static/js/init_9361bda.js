!function(){"use strict";function n(n,e,i){var t,o=null,a=[],u=0;if("boolean"===$.type(e)&&(i=e),e="undefined"!==$.type(e)?e:{},i="undefined"!==$.type(i)?i:!1,void 0===g.rules[n])throw new Error('Uncorrect endpoint in urlFor("'+n+'", '+JSON.stringify(e)+")");if(t=$.map(e,function(n,r){return r}),$.each(g.rules[n],function(n,r){var e=!0,i=0;$.each(r.params,function(n,r){return-1===$.inArray(r,t)?(e=!1,!1):void 0}),e&&(i=parseFloat(r.params.length)/t.length,(i>u||null===o)&&(u=i,o=r.rule,a=r.params))}),!o)throw new Error('Uncorrect parameters in urlFor("'+n+'", '+JSON.stringify(e)+")");return $.each(t,function(n,i){$.inArray(i,a)>-1?o=o.replace(new RegExp("<[^:]*:?"+i+">"),e[i]):(-1===o.indexOf("?")&&(o+="?"),r(o,"?")||(o+="&"),o+=i+"="+e[i])}),i&&(o=g.domain+o),o}function r(n,r){return-1!==n.indexOf(r,n.length-r.length)}function e(n){if("undefined"==typeof g)throw new Error("Global variable g is not defined.");$.each(n,function(n,r){if(g.hasOwnProperty(n))throw new Error("The key '"+n+"' already exists in the global variable g.");g[n]=r})}function i(n){return $("#main").find(n)}var t=new RegExp("<[^:]*:?([^>]+)>","g"),o=null;$.each(g.rules,function(n,r){$.each(r,function(n,r){for(r.params=[];null!==(o=t.exec(r.rule));)r.params.push(o[1])})}),window.$page=i,window.urlFor=n,window.registerContext=e}();